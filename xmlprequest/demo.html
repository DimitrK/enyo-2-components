<!DOCTYPE html>
<html>
<head>
	<title>XmlpRequest Enyo Component Demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="http://nightly.enyojs.com/latest/enyo-nightly/enyo.css">
	<script src="http://nightly.enyojs.com/latest/enyo-nightly/enyo.js"></script>
	<script src="http://nightly.enyojs.com/latest/lib/onyx/package.js"></script>
	<script src="./XmlpRequest.js"></script>
</head>
<body>
	<script type="text/javascript">
		enyo.kind({
			name: "App",
			kind: "Scroller",
			classes: "onyx enyo-unselectable",
			components: [
				{kind: "onyx.Toolbar", content:"XmlpRequest Enyo Component Demo"},
				{style:"margin:0 25px 0 25px;", components:[
					{style:"height:50px;"},
					{kind: "onyx.Groupbox", components: [
						{kind: "onyx.GroupboxHeader", content: "XML URL To Request"},
						{kind: "onyx.InputDecorator", components: [
							{name:"xmlUrl", kind: "onyx.Input", style:"width:100%;", value: "http://weather.yahooapis.com/forecastrss?w=2502265"},
							{kind: "onyx.Button", content: "Go", style:"float:right; position:relative; top:-25px;", ontap:"tapButton"}
						]}
					]},
					{style:"height:50px;"},
					{kind: "onyx.Groupbox", components: [
						{kind: "onyx.GroupboxHeader", content: "Response"},
						{name:"results", content: " ", style: "padding: 8px; min-height:1em; word-break:break-all; word-wrap:break-word; white-space:pre-wrap;"}
					]},
				]},
			],
			tapButton: function(inSender, inEvent) {
				var xmlpRequest = new enyo.XmlpRequest({url:this.$.xmlUrl.getValue()});
				xmlpRequest.response(this, "requestCallback");
				xmlpRequest.go(); //if I had a json object of parameters, they could go here
			},
			requestCallback: function(inSender, inResponse) {
				this.$.results.setContent(enyo.json.stringify(inResponse, undefined, '\t'));
			}
		});
		var app = new App();
		app.renderInto(document.body);
	</script>
</body>
</html>