<!DOCTYPE html>
<html>
<head>
	<title>YqlpRequest Enyo Component Demo</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<link rel="stylesheet" href="http://enyojs.com/enyo-2.0b3/enyo.css">
	<script src="http://enyojs.com/enyo-2.0b3/enyo.js"></script>
	<script src="http://enyojs.com/lib/onyx/package.js"></script>
	<script src="http://enyojs.com/lib/extra/jsonp/package.js"></script>
	<script src="./YqlpRequest.js"></script>
</head>
<body>
	<script type="text/javascript">
		enyo.kind({
			name: "App",
			kind: "Scroller",
			classes: "onyx enyo-unselectable",
			components: [
				{kind: "onyx.Toolbar", content:"YqlpRequest Enyo Component Demo"},
				{style:"margin:0 25px 0 25px;", components:[
					{style:"height:50px;"},
					{kind: "onyx.Groupbox", components: [
						{kind: "onyx.GroupboxHeader", content: "YQL Query"},
						{kind: "onyx.InputDecorator", components: [
							{name:"query", kind: "onyx.Input", style:"width:100%;", value: "SELECT * from geo.places WHERE text='SFO'"},
							{kind: "onyx.Button", content: "Go", style:"float:right; position:relative; top:-30px;", ontap:"tapButton"}
						]}
					]},
					{style:"height:50px;"},
					{kind: "onyx.Groupbox", components: [
						{kind: "onyx.GroupboxHeader", content: "Response"},
						{name:"results", content: " ", style: "padding: 8px; min-height:1em; word-break:break-all; word-wrap:break-word; white-space:pre-wrap;"}
					]},
				]},
			],
			tapButton: function(inSender, inEvent) {
				var yql = new enyo.YqlpRequest({query:this.$.query.getValue()});
				yql.response(this, "requestCallback");
				yql.go(); //if I had a json object of parameters, they could go here
			},
			requestCallback: function(inSender, inResponse) {
				this.$.results.setContent(enyo.json.stringify(inResponse, undefined, '\t'));
			}
		});
		var app = new App();
		app.renderInto(document.body);
	</script>
</body>
</html>